import{f as y,d as k,k as R,r as o,Q as l,l as S,a as e,j as a,L as m,B as j}from"./index.075fb68b.js";import{T as u}from"./Textinput.595cc28f.js";import{c as L,a as p,b as q,u as E,o as F}from"./array.537130ac.js";import{L as _}from"./left-image.1bc0c5de.js";const C=L({password:p().min(8,"Password must be at least 8 characters").required("Password is required"),password_confirmation:p().oneOf([q("password"),null],"Passwords must match").required("Confirm password is required")}).required(),A=()=>{y();const n=k(),i=R(),[f,w]=o.exports.useState(""),[h,x]=o.exports.useState("");o.exports.useEffect(()=>{const r=new URLSearchParams(i.search),t=r.get("token"),s=r.get("email");t&&w(t),s&&x(decodeURIComponent(s)),(!t||!s)&&(l.error("Invalid reset password link"),n("/forgot-password"))},[i,n]);const{register:c,handleSubmit:b,formState:{errors:d}}=E({resolver:F(C)}),[g,{isLoading:N}]=S(),v=async r=>{var t;try{const s={token:f,email:h,password:r.password,password_confirmation:r.password_confirmation},P=await g(s).unwrap();l.success(P.message||"Password has been reset successfully"),n("/login")}catch(s){l.error(((t=s==null?void 0:s.data)==null?void 0:t.error)||"Failed to reset password. Please try again.")}};return o.exports.useEffect(()=>{document.title="Reset Password | Rentplan"},[]),e("div",{className:"loginwrapper flex items-center justify-center min-h-screen",children:a("div",{className:"lg-inner-column w-[95%] md:w-[80%] max-h-[600px] h-full flex items-center justify-center bg-white dark:bg-slate-800 rounded-[16px]",children:[e(_,{}),e("div",{className:"right-column relative",children:a("div",{className:"inner-content h-full flex flex-col",children:[a("div",{className:"auth-box h-full flex flex-col justify-center",children:[e("div",{className:"mobile-logo text-center mb-6 lg:hidden block",children:e(m,{to:"/",children:a("h1",{className:"text-3xl font-bold italic flex items-center justify-center h-full",children:["Rentplan",e("span",{className:"text-[#FF4847]",children:"."})]})})}),a("div",{className:"text-center 2xl:mb-10 mb-4",children:[e("h4",{className:"font-medium",children:"Reset Your Password"}),e("div",{className:"text-slate-500 text-base",children:"Enter your new password below"})]}),a("form",{onSubmit:b(v),className:"space-y-4",children:[e(u,{name:"password",label:"New Password",type:"password",placeholder:"Enter your new password",register:c,error:d.password,className:"h-[48px]",hasicon:!0}),e(u,{name:"password_confirmation",label:"Confirm Password",type:"password",placeholder:"Confirm your new password",register:c,error:d.password_confirmation,className:"h-[48px]",hasicon:!0}),e(j,{type:"submit",text:"Reset Password",className:"btn btn-dark block w-full text-center",isLoading:N})]}),e("div",{className:"md:max-w-[345px] mx-auto font-normal text-slate-500 dark:text-slate-400 2xl:mt-12 mt-8 uppercase text-sm",children:e(m,{to:"/",className:"text-slate-900 dark:text-white font-medium hover:underline",children:"Back to Sign In"})})]}),a("div",{className:"auth-footer text-center",children:["\xA9 Rentplan ",new Date().getFullYear(),", All Rights Reserved."]})]})})]})})};export{A as default};
